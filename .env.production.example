# ==============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION FOR DOCKER
# ==============================================================================
# This file contains production-ready environment variables for Docker deployments
# Copy this file and customize for your production environment
#
# IMPORTANT: When running behind HTTPS reverse proxy (recommended):
# - Set APP_FORCE_HTTPS=true
# - Set ASSET_URL and APP_URL to your HTTPS domain
# ==============================================================================

# ------------------------------------------------------------------------------
# Application Configuration
# ------------------------------------------------------------------------------
APP_NAME="Sistema de Licitações"
APP_ENV=production
APP_DEBUG=false

# Generate a new key with: php artisan key:generate
# NEVER use this example key in production!
APP_KEY=base64:CHANGE_THIS_TO_YOUR_GENERATED_APP_KEY

# Timezone (adjust to your location)
APP_TIMEZONE=America/Sao_Paulo
APP_LOCALE=pt_BR
APP_FALLBACK_LOCALE=pt_BR
APP_FAKER_LOCALE=pt_BR

# ------------------------------------------------------------------------------
# HTTPS and Reverse Proxy Configuration
# ------------------------------------------------------------------------------
# When running behind an HTTPS reverse proxy (Traefik, nginx-proxy, Caddy):
# 1. Set APP_FORCE_HTTPS=true to force all URLs to use HTTPS scheme
# 2. Set APP_URL and ASSET_URL to your HTTPS domain
# 3. Ensure your reverse proxy forwards these headers:
#    - X-Forwarded-Proto: https
#    - X-Forwarded-Host: your-domain.com
#    - X-Forwarded-Port: 443
# ------------------------------------------------------------------------------

# Force HTTPS URL generation (set to true when behind HTTPS reverse proxy)
APP_FORCE_HTTPS=true

# Your production domain (use HTTPS if behind SSL/TLS termination)
APP_URL=https://app.example.com

# Asset URL (same as APP_URL for HTTPS, ensures CSS/JS loads correctly)
ASSET_URL=https://app.example.com

# ------------------------------------------------------------------------------
# Database Configuration
# ------------------------------------------------------------------------------
# Default: SQLite (recommended for small to medium deployments)
DB_CONNECTION=sqlite
DB_DATABASE=/var/www/html/database/database.sqlite

# Alternative: PostgreSQL (recommended for high-traffic production)
# DB_CONNECTION=pgsql
# DB_HOST=postgres
# DB_PORT=5432
# DB_DATABASE=licitacao
# DB_USERNAME=licitacao_user
# DB_PASSWORD=your_secure_database_password

# Alternative: MySQL/MariaDB
# DB_CONNECTION=mysql
# DB_HOST=mysql
# DB_PORT=3306
# DB_DATABASE=licitacao
# DB_USERNAME=licitacao_user
# DB_PASSWORD=your_secure_database_password

# ------------------------------------------------------------------------------
# Cache Configuration
# ------------------------------------------------------------------------------
CACHE_STORE=redis
CACHE_PREFIX=licitacao_cache

# ------------------------------------------------------------------------------
# Session Configuration
# ------------------------------------------------------------------------------
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=true
SESSION_PATH=/
SESSION_DOMAIN=null
SESSION_SECURE_COOKIE=true

# ------------------------------------------------------------------------------
# Queue Configuration
# ------------------------------------------------------------------------------
QUEUE_CONNECTION=redis

# ------------------------------------------------------------------------------
# Redis Configuration
# ------------------------------------------------------------------------------
REDIS_CLIENT=phpredis
REDIS_HOST=redis
REDIS_PASSWORD=null
REDIS_PORT=6379
REDIS_DB=0
REDIS_CACHE_DB=1
REDIS_QUEUE_DB=2

# ------------------------------------------------------------------------------
# Logging Configuration
# ------------------------------------------------------------------------------
LOG_CHANNEL=stderr
LOG_LEVEL=warning
LOG_STDERR_FORMATTER=Monolog\Formatter\JsonFormatter

# ------------------------------------------------------------------------------
# Mail Configuration
# ------------------------------------------------------------------------------
MAIL_MAILER=smtp
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_USERNAME=noreply@example.com
MAIL_PASSWORD=your_mail_password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@example.com
MAIL_FROM_NAME="${APP_NAME}"

# ------------------------------------------------------------------------------
# Security Configuration
# ------------------------------------------------------------------------------
# Broadcast: Set to 'null' if not using WebSockets
BROADCAST_CONNECTION=null

# File Systems
FILESYSTEM_DISK=local

# ------------------------------------------------------------------------------
# Performance Optimization
# ------------------------------------------------------------------------------
# Opcache (enabled by default in production PHP-FPM)
OPCACHE_ENABLE=1
OPCACHE_MEMORY_CONSUMPTION=256
OPCACHE_MAX_ACCELERATED_FILES=20000

# ------------------------------------------------------------------------------
# External Services (Optional)
# ------------------------------------------------------------------------------
# AWS S3 (if using for file storage)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_DEFAULT_REGION=us-east-1
# AWS_BUCKET=
# AWS_USE_PATH_STYLE_ENDPOINT=false

# ------------------------------------------------------------------------------
# Development Tools (Disable in Production)
# ------------------------------------------------------------------------------
TELESCOPE_ENABLED=false
DEBUGBAR_ENABLED=false

# ------------------------------------------------------------------------------
# CORS Configuration (if needed for API)
# ------------------------------------------------------------------------------
# CORS_ALLOWED_ORIGINS=https://app.example.com
# CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
# CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# ==============================================================================
# USAGE INSTRUCTIONS
# ==============================================================================
#
# 1. Copy this file:
#    cp .env.production.example .env
#
# 2. Generate application key:
#    docker-compose exec app php artisan key:generate
#
# 3. Update the following REQUIRED variables:
#    - APP_KEY (generated in step 2)
#    - APP_URL (your production domain with https://)
#    - ASSET_URL (same as APP_URL)
#    - Database credentials (if not using SQLite)
#    - Mail configuration (for notifications)
#
# 4. For HTTPS deployments (recommended):
#    - Ensure APP_FORCE_HTTPS=true
#    - Configure your reverse proxy to forward proper headers
#    - See HTTPS-SETUP.md for detailed configuration
#
# 5. Deploy:
#    docker-compose up -d
#
# ==============================================================================
